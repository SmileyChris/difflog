<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Privacy - diff·log</title>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="stylesheet" href="/styles.css" />
  <script type="module" src="/app.js"></script>
</head>
<body>
  <main id="content" x-data>
    <!-- No profile: top nav -->
    <nav class="about-nav" x-show="!$store.app.profile">
      <a href="/about" class="about-nav-link">welcome</a>
      <span class="about-nav-sep">&#9670;</span>
      <span class="about-nav-link about-nav-link-active">privacy</span>
      <span class="about-nav-sep">&#9670;</span>
      <a href="/about/terms" class="about-nav-link">terms</a>
    </nav>

    <!-- Has profile: header -->
    <header x-cloak x-show="$store.app.profile">
      <div class="header-left">
        <a href="/" class="main-title-link">
          <div class="logo-mark-header">&#9670;</div>
        </a>
        <div>
          <h1 class="main-title"><a href="/" class="main-title-link">diff<span class="title-diamond">&#9670;</span>log</a></h1>
          <nav class="about-nav-inline">
            <a href="/about" class="about-nav-link">about</a>
            <span class="about-nav-sep">&#9670;</span>
            <span class="about-nav-link about-nav-link-active">privacy</span>
            <span class="about-nav-sep">&#9670;</span>
            <a href="/about/terms" class="about-nav-link">terms</a>
          </nav>
        </div>
      </div>
      <div class="header-right">
        <a href="/profiles" class="profile-badge">
          <svg class="profile-badge-icon" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="11" r="4"/><path d="M4 22c0-4.4 3.6-8 8-8s8 3.6 8 8"/></svg>
          <span x-text="$store.app.profile?.name || 'Profile'"></span>
        </a>
      </div>
    </header>

    <!-- Shared content -->
    <article>
      <p class="about-intro"><strong class="brand-inline">diff<span class="brand-diamond">&#9670;</span>log</strong> is designed with privacy at its core. Your data stays on your device unless you explicitly choose to sync it.</p>

      <div class="about-tldr">
        <h3 class="about-tldr-title">TL;DR</h3>
        <ul class="about-tldr-list">
          <li>Your data stays in your browser — we can't see it</li>
          <li>Sync is optional and encrypted; sharing is opt-in</li>
          <li>Creds accounts store only your email and balance</li>
          <li>Minimal analytics (Cloudflare Web Analytics — no cookies, no personal data)</li>
        </ul>
      </div>

      <section>
        <h3>Local-First Architecture</h3>
        <p>Everything you create in diff·log — your profile, preferences, generated diffs, and starred items — is stored locally in your browser's localStorage. This data never automatically transmits to any server. If you clear your browser data or switch browsers, your local data will be lost unless you've enabled cloud sync.</p>
      </section>

      <section>
        <h3>API Key Storage (BYOK Mode)</h3>
        <p>If you use your own API key, it is stored only in your browser's localStorage. When you generate a diff, your browser makes a direct request to Anthropic's API — our servers never see your key. This means you have full control over your API usage and costs.</p>
      </section>

      <section>
        <h3>Creds Accounts</h3>
        <p>If you use creds (prepaid credits) instead of your own API key, we store:</p>
        <ul>
          <li><strong>Email address</strong> — Used to identify your account and send verification codes</li>
          <li><strong>Credit balance</strong> — Your current creds and transaction history</li>
        </ul>
        <p>When you generate a diff using creds, our server calls the Anthropic API on your behalf. The generated content is temporarily stored server-side until your browser confirms receipt, then deleted.</p>
        <p>Payment processing is handled by Stripe. We do not store your card details — only Stripe's customer ID to link purchases to your account.</p>
      </section>

      <section>
        <h3>Optional Cloud Sync</h3>
        <p>If you enable cloud sync, your data is encrypted client-side using AES-256-GCM before being uploaded. The encryption key is derived from your password using PBKDF2 with 100,000 iterations. We store only encrypted blobs — we cannot read your data, and neither can anyone who might access our servers.</p>
        <p>Sync is entirely optional. diff·log works fully offline with local-only storage.</p>

        <h4><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: -0.1em; margin-right: 0.3rem;"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>Public Diff Sharing</h4>
        <p>With cloud sync enabled, you can optionally share individual diffs publicly. When you share a diff, it is stored unencrypted so anyone with the link can view it. Public diffs display your profile name alongside the content.</p>
        <p>You retain full control: unsharing a diff re-encrypts it and immediately makes the public link inaccessible. Only the specific diffs you choose to share are public — all other data remains encrypted.</p>
      </section>

      <section>
        <h3>Minimal Analytics</h3>
        <p>diff·log uses Cloudflare Web Analytics, a privacy-first analytics service. It collects only aggregate page view metrics — no cookies, no personal identifiers, no cross-site tracking. We use this to understand basic usage patterns (which pages are visited) without collecting any information about individual users.</p>
        <p>We don't use tracking pixels or other third-party scripts. There are no cookies except what's strictly necessary for the application to function.</p>
      </section>

      <section>
        <h3>Third-Party Services</h3>
        <p>diff·log interacts with the following external services:</p>
        <ul>
          <li><strong>Anthropic API</strong> — For generating diffs. In BYOK mode, your browser communicates directly with Anthropic. In creds mode, our server makes the request on your behalf.</li>
          <li><strong>Feed aggregator</strong> — Our server fetches public RSS/API data from sources like HN, Reddit, and GitHub to provide context for diff generation. No personal data is sent.</li>
          <li><strong>Cloudflare</strong> — For hosting, optional sync storage (encrypted data only), and privacy-first web analytics.</li>
          <li><strong>Stripe</strong> — For processing creds purchases. Stripe handles all payment details; we only receive confirmation of successful payments. See <a href="https://stripe.com/privacy" target="_blank" rel="noopener">Stripe's privacy policy</a>.</li>
        </ul>
      </section>

      <section>
        <h3>Data Deletion</h3>
        <p>To delete your local data, clear your browser's localStorage for this site.</p>
        <p>If you've enabled cloud sync: individual diffs can be deleted from the Archive page, which permanently removes them from our servers. To fully delete your synced profile, first delete all diffs while synced — this ensures other devices won't re-upload them. Then delete your profile from the Profiles page to remove all remaining data from our servers.</p>
        <p>For creds accounts: contact us to request deletion of your email and transaction history. Note that we may retain records as required for tax and legal purposes.</p>
      </section>

      <!-- No profile: CTA -->
      <div class="about-cta" x-show="!$store.app.profile">
        <a href="/setup" class="splash-cta">
          <span class="splash-cta-icon">&#9670;</span>
          Get Started
        </a>
      </div>

    </article>

    <footer class="about-footer">
      <a href="/" class="about-footer-link" x-cloak x-show="$store.app.profile">&larr; back home</a>
      <span class="about-footer-sep" x-cloak x-show="$store.app.profile">&#9670;</span>
      <a href="https://smileychris.github.io/difflog/" class="about-footer-link" target="_blank" rel="noopener">&hearts; opensource</a>
    </footer>
  </main>
</body>
</html>
